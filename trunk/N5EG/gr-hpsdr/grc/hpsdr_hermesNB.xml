<?xml version="1.0"?>
<block>
  <name>hermesNB</name>
  <key>hpsdr_hermesNB</key>
  <category>hpsdr</category>
  <import>import hpsdr</import>
  <make>hpsdr.hermesNB($RxF, $RxSmp, $RxPre)</make>
  <callback>set_ReceiveFrequency($RxF)</callback>
  <callback>set_RxSampRate($RxSmp)</callback>
  <callback>set_RxPreamp($RxPre)</callback>
  <callback>set_PTTMode($PTTmode)</callback>
  <callback>set_PTTOffMutesTx($PTTTx)</callback>
  <callback>set_PTTOnMutesRx($PTTRx)</callback>
  <callback>set_TxDrive($TxDrive)</callback>

 <!-- Make one 'param' node for every Parameter you want settable from the GUI.
       Sub-nodes:
       * name
       * key (makes the value accessible as $keyname, e.g. in the make node)
       * type -->
  <param>
    <name>Receive Frequency, Hz.</name>
    <key>RxF</key>
    <value>7200000</value>
    <type>real</type>
  </param>
  <param>
    <name>Rx Sample Rate</name>
    <key>RxSmp</key>
    <value>192000</value>
    <type>int</type>
  </param>
  <param>
    <name>Rx Preamp Off/On</name>
    <key>RxPre</key>
    <value>0</value>
    <type>int</type>
  </param>
  <param>
    <name>PTT On Mutes Rx</name>
    <key>PTTRx</key>
    <value>1</value>
    <type>int</type>
  </param>
  <param>
    <name>PTT Off Mutes Tx</name>
    <key>PTTTx</key>
    <value>1</value>
    <type>int</type>
  </param>
  <param>
    <name>Tx PTT mode Off/Vox/On</name>
    <key>PTTmode</key>
    <value>0</value>
    <type>int</type>
  </param>
  <param>
    <name>Tx Drive Level (0..255)</name>
    <key>TxDrive</key>
    <value>255</value>
    <type>int</type>
  </param>
  <!-- Make one 'sink' node per input. Sub-nodes:
       * name (an identifier for the GUI)
       * type
       * vlen
       * optional (set to 1 for optional inputs) -->
  <sink>
    <name>in</name>
    <type>complex</type>
  </sink>

  <!-- Make one 'source' node per output. Sub-nodes:
       * name (an identifier for the GUI)
       * type e.g.   int, real, complex, byte, short, xxx_vector, ...
       * vlen
       * optional (set to 1 for optional inputs) -->
  <source>
    <name>out</name>
    <type>complex</type>
  </source>
  <doc>
  This block is the HPSDR Hermes/Metis module.
  It supports only one receiver in the Narrow Band (digital downconversion) mode.
  Receive Frequency, Receive Sample Rate, and Receive Preamp can be set.
  Supports transmit operation.
  RxSamp = 48000, 96000,  or 192000
  RxPreamp = 0 (Off), or  1 (On)
  PTTMode = 0 (TxOff),  1 (Vox on Txframe contents), or  2 (TxOn)
  PTTOffMutesTx = 0 (Tx always emits), 1 (Tx IQ is zeroed when PTT is Off)
  PTTOnMutesRx = 0 (Rx always receives), 1 (Rx IQ is zeroed when PTT is On)
  TxDrive = 0..255 (0 is minimum (but not zero) drive.  255 is maximum drive)
  </doc>
</block>
